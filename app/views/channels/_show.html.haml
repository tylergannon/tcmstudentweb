- @channel.acu_points.each do |p|
  .acu_point
    %h2!= link(p)
    = show_box_for p
    = detail_box_for p do
      != edit_link(p)
      %table
        %tr
          %td.fieldName Source
          - p.acu_point_infos.each do |info|
            %td
              %h1!= link info.citation
        %tr
          %td.fieldName Functions
          - p.acu_point_infos.each do |info|
            %td
              %ul
                - info.acu_point_therapeutic_functions.each do |aptf|
                  %li!= link aptf
        %tr
          %td.fieldName Symptoms
          - p.acu_point_infos.each do |info|
            %td!= link info.all_symptoms
        %tr
          %td.fieldName Location
          - p.acu_point_infos.each do |info|
            %td
              :tcmtextile
                #{info.location}
        %tr
          %td.fieldName Needling
          - p.acu_point_infos.each do |info|
            %td
              :tcmtextile
                #{info.needling}
      .pointPrescriptions
        = show_box_for p, 'Show Point Prescriptions', 'Hide Point Prescriptions', :point_prescriptions
        = detail_box_for p, :point_prescriptions do
          = ajax_association_link("Load point prescriptions", p, :point_prescriptions)
          %div{:id=>p.element_id(:point_prescriptions)}
      .pointCombinations
        = show_box_for p, 'Show Point Combinations', 'Hide Point Combinations', :point_combinations
        = detail_box_for p, :point_combinations do
          = ajax_association_link("Load point combinations", p, :point_combinations)
          %div{:id=>p.element_id(:point_combinations)}
      %hr/


%h1 By Tag:
%ul
  - @channel.each_tag do |tag, therapeutic_functions|
    %li
      %h3= tag.name
      = show_box_for tag
      = detail_box_for tag do
        - therapeutic_functions.each do |tf|
          %ul
            %li
              .fieldName!= "#{link tf}:"
              != link @channel.acu_points.with_tf(tf)

